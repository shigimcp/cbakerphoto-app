!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("masonry-layout"),require("@angular/core"),require("@angular/common"),require("@angular/animations")):"function"==typeof define&&define.amd?define("ngx-masonry",["exports","masonry-layout","@angular/core","@angular/common","@angular/animations"],e):e((t=t||self)["ngx-masonry"]={},t.masonryLayout,t.ng.core,t.ng.common,t.ng.animations)}(this,(function(t,e,n,o,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var r;function a(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function s(t,e){return function(n,o){e(n,o,t)}}function m(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var l=function(){function t(t,e){this.platformId=t,this._element=e,this.updateLayout=!1,this.layoutComplete=new n.EventEmitter,this.removeComplete=new n.EventEmitter}return t.prototype.ngOnInit=function(){var t=this;o.isPlatformBrowser(this.platformId)&&void 0===r&&(r=e),this.options||(this.options={}),this.options.itemSelector||(this.options.itemSelector="[ngxMasonryItem], ngxMasonryItem"),this.options.transitionDuration="0s",o.isPlatformBrowser(this.platformId)&&(this.masonryInstance=new r(this._element.nativeElement,this.options),this.masonryInstance.on("layoutComplete",(function(e){t.layoutComplete.emit(e)})),this.masonryInstance.on("removeComplete",(function(e){t.removeComplete.emit(e)})))},t.prototype.ngOnChanges=function(t){t.updateLayout&&(t.updateLayout.firstChange||this.layout())},t.prototype.ngOnDestroy=function(){this.masonryInstance&&this.masonryInstance.destroy()},t.prototype.layout=function(){var t=this;setTimeout((function(){t.masonryInstance.layout()}))},t.prototype.reloadItems=function(){var t=this;setTimeout((function(){t.masonryInstance.reloadItems()}))},t.prototype.add=function(t){this.masonryInstance.appended(t),1===this.masonryInstance.items.length&&this.masonryInstance.layout()},t.prototype.remove=function(t){this.masonryInstance.remove(t),this.layout()},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:[n.PLATFORM_ID]}]},{type:n.ElementRef}]},a([n.Input()],t.prototype,"options",void 0),a([n.Input()],t.prototype,"updateLayout",void 0),a([n.Output()],t.prototype,"layoutComplete",void 0),a([n.Output()],t.prototype,"removeComplete",void 0),t=a([n.Component({selector:"[ngx-masonry], ngx-masonry",template:"<ng-content></ng-content>",styles:["\n\t\t:host {\n\t\t\tdisplay: block;\n\t\t}\n\t"]}),s(0,n.Inject(n.PLATFORM_ID))],t)}(),p=function(){function t(t,e,n,o){this.builder=t,this.element=e,this.parent=n,this.renderer=o,this.animations={show:[i.style({opacity:0}),i.animate("400ms ease-in",i.style({opacity:1}))],hide:[i.style({opacity:"*"}),i.animate("400ms ease-in",i.style({opacity:0}))]}}return t.prototype.ngOnInit=function(){void 0!==this.parent.options.animations&&(this.animations=this.parent.options.animations)},t.prototype.ngAfterViewInit=function(){var t,e,n=this,o=this.element.nativeElement.getElementsByTagName("img");if(this.renderer.setStyle(this.element.nativeElement,"opacity","0"),this.images=new Set(o),0===o.length)this.parent.add(this.element.nativeElement);else{var i=function(t){r.renderer.listen(t,"load",(function(e){n.imageLoaded(t)})),r.renderer.listen(t,"error",(function(e){n.imageLoaded(t)}))},r=this;try{for(var a=m(o),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}},t.prototype.ngOnDestroy=function(){0===this.images.size&&this.element.nativeElement.parentNode&&(this.playAnimation(!1),this.parent.remove(this.element.nativeElement))},t.prototype.imageLoaded=function(t){this.images.delete(t),0===this.images.size&&(this.renderer.setStyle(this.element.nativeElement,"opacity","100"),this.parent.add(this.element.nativeElement),this.playAnimation(!0))},t.prototype.playAnimation=function(t){var e=t?this.animations.show:this.animations.hide;e&&this.builder.build(e).create(this.element.nativeElement).play()},t.ctorParameters=function(){return[{type:i.AnimationBuilder},{type:n.ElementRef},{type:l,decorators:[{type:n.Inject,args:[n.forwardRef((function(){return l}))]}]},{type:n.Renderer2}]},t=a([n.Directive({selector:"[ngxMasonryItem], ngxMasonryItem"}),s(2,n.Inject(n.forwardRef((function(){return l}))))],t)}(),u=function(){function t(){}return t=a([n.NgModule({imports:[],declarations:[l,p],exports:[l,p]})],t)}();t.NgxMasonryComponent=l,t.NgxMasonryDirective=p,t.NgxMasonryModule=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-masonry.umd.min.js.map